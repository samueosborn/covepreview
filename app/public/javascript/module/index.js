import{R as e,r as t,c as r,a as n,b as o,d as c,e as a,f as i}from"./index-90e5897d.js";import{_ as u,r as s}from"./defineProperty-7df281d8.js";var l=function(e){if(Array.isArray(e))return e};var p=function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,o=!1,c=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw c}}return r}};var f=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")};var b=function(e,t){return l(e)||p(e,t)||f()};class y{constructor(e="keyval-store",t="keyval"){this.storeName=t,this._dbp=new Promise((r,n)=>{const o=indexedDB.open(e,1);o.onerror=()=>n(o.error),o.onsuccess=()=>r(o.result),o.onupgradeneeded=()=>{o.result.createObjectStore(t)}})}_withIDBStore(e,t){return this._dbp.then(r=>new Promise((n,o)=>{const c=r.transaction(this.storeName,e);c.oncomplete=()=>n(),c.onabort=c.onerror=()=>o(c.error),t(c.objectStore(this.storeName))}))}}let O;function m(){return O||(O=new y),O}var h={SET_THEME:"SET_THEME"};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(r,!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var v={theme:{theme:!0}};function g(e,t){switch(t.type){case h.SET_THEME:return Object.assign({},e,{theme:j({},t.payload||[])});default:throw new Error("Unhandled action type: ".concat(t.type))}}var E=e.createContext(),w=e.createContext();function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(r,!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var D=r(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t.apply(this,arguments)}e.exports=t});var T=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(r,!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var k,B=function(){return e.createElement("h1",null,"Loading")},I=c(function(){return import("./Home-cdb1b1c2.js")}),H=c(function(){return import("./Login-71eab579.js")}),N=c(function(){return import("./Forgot-689a296c.js")}),A=c(function(){return import("./Register-e1db20b1.js")}),C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return T(e),{}};return function(r){var c=n(r);return function(r){var n=o(E),a=o(w),i=x({},t(n));return e.createElement(c,D({},r,i,{dispatch:a}))}}}()(function(){return e.createElement(a,{fallback:e.createElement(B,null)},e.createElement(i,{className:"app"},e.createElement(I,{path:"/"}),e.createElement(H,{path:"/login"}),e.createElement(N,{path:"/forgot"}),e.createElement(A,{path:"/register"})))}),M=(k=C,function(r){var n=t(g,S({},v,{session:S({},v.session,{},r.user)})),o=b(n,2),c=o[0],a=o[1];return e.createElement(E.Provider,{value:c},e.createElement(w.Provider,{value:a},e.createElement(k,null)))});(function(e,t=m()){let r;return t._withIDBStore("readonly",t=>{r=t.get(e)}).then(()=>r.result)})("user").then(function(t){return s(e.createElement(M,{user:t}),document.getElementById("root"))}).catch(function(t){s(e.createElement(M,{user:null}),document.getElementById("root"))});
